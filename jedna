import matplotlib.pyplot as plt
import pandas as pd

# Assuming 'data' is your DataFrame after loading the CSV and processing datetime

# Plot setup
fig, ax1 = plt.subplots()

# Create the first Y-axis for CPU units
color = 'tab:red'
ax1.set_xlabel('Time')
ax1.set_ylabel('CPU Units', color=color)
ax1.plot(data['Started'], data['CpuUnits'], color=color, label='CPU Units')
ax1.tick_params(axis='y', labelcolor=color)

# Instantiate a second Y-axis sharing the same X-axis
ax2 = ax1.twinx()  
color = 'tab:blue'
ax2.set_ylabel('MemoryMB', color=color)  # we already handled the x-label with ax1
ax2.plot(data['Started'], data['MemoryMB'], color=color, label='Memory (MB)')
ax2.tick_params(axis='y', labelcolor=color)

# Title and show plot
plt.title('CPU and Memory Usage Over Time')
fig.tight_layout()  # adjust subplot parameters to give specified padding
plt.show()
