import pandas as pd
import numpy as np
import matplotlib.pyplot as plt

# Assuming 'data' is your DataFrame after loading the CSV and processing datetime columns

# Create a time range from the earliest 'Started' to the latest 'Stopped'
# Here, we generate time points at 1-minute intervals for simplicity
time_range = pd.date_range(start=data['Started'].min(), end=data['Stopped'].max(), freq='T')

# Function to count running applications at each time point
def count_running_apps(time_point, data):
    return np.sum((data['Started'] <= time_point) & (data['Stopped'] >= time_point))

# Count the number of running applications for each time point
running_apps_counts = [count_running_apps(time, data) for time in time_range]

# Plotting the graph
fig, ax = plt.subplots()
ax.plot(time_range, running_apps_counts, label='Running Applications')
ax.set_xlabel('Time')
ax.set_ylabel('Number of Running Applications')
plt.xticks(rotation=45)  # Rotate date labels for better readability
plt.title('Number of Running Applications Over Time')
plt.legend()
plt.show()
